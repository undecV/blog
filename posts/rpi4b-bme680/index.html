<!DOCTYPE html>
<html lang="en" >

<head>
    <meta charset="UTF-8"><meta http-equiv="Content-Security-Policy"
content="default-src 'self';font-src 'self' data: 'self';img-src 'self' https://* data:;media-src 'self';style-src 'self' 'unsafe-inline';frame-src player.vimeo.com https://www.youtube-nocookie.com;connect-src 'self' https://umami.d.poi48.xyz;script-src 'self' https://umami.d.poi48.xyz 'self'">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="base" content="https://undecv.github.io/blog">

    
    <title>
キャンディージャー • 桌面級氣象站：樹梅派4B × BME680</title>

    
    
        <link rel="icon" type="image/png" href="https://undecv.github.io/blog/favicon.32.png"/>
    
    

    
    
        
            
            
                
                    <link rel="alternate" type="application/atom+xml" title="キャンディージャー - Atom Feed" href="https://undecv.github.io/blog/atom.xml">
                
            
                
                    <link rel="alternate" type="application/rss+xml" title="キャンディージャー - RSS Feed" href="https://undecv.github.io/blog/rss.xml">
                
            
        
    

    
    
    
        
            <link rel="stylesheet" href="https://undecv.github.io/blog/custom_subset.css?h=0b9535a28bc3d5bf2321">
        
    

    
        <link rel="stylesheet" href="https://undecv.github.io/blog/main.css?h=3716ab3457d2dd050b3c" />
        <link rel="stylesheet" href="https://undecv.github.io/blog/css/custom.css?h=1e2fa6957df82e1f9bb9" />
        <link rel="stylesheet" href="https://undecv.github.io/blog/skins/lowcontrast_orange.css?h=43aaccb17d8ec616ace4" />

    <meta name="color-scheme" content="light dark" />
        <meta name="description" content="&lt;del&gt;因為想讓樹莓派做一些像是樹莓派會做的事（？&lt;&#x2F;del&gt;" />
        <meta property="og:description" content="&lt;del&gt;因為想讓樹莓派做一些像是樹莓派會做的事（？&lt;&#x2F;del&gt;" />

    

    <meta property="og:title" content="桌面級氣象站：樹梅派4B × BME680" />
    <meta property="og:type" content="article" />

    
<meta property="og:locale" content="en_GB" />

    <meta property="og:url" content="https:&#x2F;&#x2F;undecv.github.io&#x2F;blog&#x2F;posts&#x2F;rpi4b-bme680&#x2F;" /><meta property="og:site_name" content="キャンディージャー">
        <noscript><link rel="stylesheet" href="https://undecv.github.io/blog/no_js.css"/></noscript>
        <script type="text/javascript" src="https://undecv.github.io/blog/js/initializeTheme.min.js"></script>
        <script defer src="https://undecv.github.io/blog/js/themeSwitcher.min.js"></script>




    <script async defer
    
        data-website-id="3252b6d8-dd6f-4baa-a6f2-d6078a5858c2"
        src="https://umami.d.poi48.xyz/script.js"
    
    >
    </script>

    
<meta name="fediverse:creator" content="@undecv@g0v.social" />
    
</head>


<body>
    <a href="#main-content" id="skip-link">Skip to content</a>
    <header>
    <nav class="navbar">
        <div class="nav-title">
            <a class="home-title" href="https://undecv.github.io/blog/">キャンディージャー</a>
        </div>
            <div class="nav-navs">
                <ul>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://undecv.github.io/blog/posts/">Posts
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://undecv.github.io/blog/archive/">Archive
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://undecv.github.io/blog/tags/">Tags
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://undecv.github.io/blog/projects/">Projects
                                </a>
                            </li>
                        <li class="menu-icons-container">
                        <ul class="menu-icons-group">
                            

                            
                            

                            <li class="theme-switcher-wrapper js"><div
        title="Toggle dark&#x2F;light mode"
        class="theme-switcher"
        tabindex="0"
        role="button"
        aria-label="Toggle dark mode"
        aria-pressed="false">
    </div><div
        title="Reset mode to default"
        class="theme-resetter arrow"
        tabindex="0"
        role="button"
        aria-hidden="true"
        aria-label="Reset mode to default">
    </div>

</li>
</ul>
                    </li>
                </ul>
            </div>
        
    </nav>
</header>

    <div class="content" id="main-content">

        
        





<main>
    <article class="h-entry">
        <h1 class="p-name article-title">
            桌面級氣象站：樹梅派4B × BME680
        </h1>
        <a class="u-url u-uid" href="https://undecv.github.io/blog/posts/rpi4b-bme680/"></a>

        <ul class="meta"><li>By <span class="p-author">undecV</span></li><span class="hidden p-author h-card">
<a rel="author" href="https:&#x2F;&#x2F;undecv.github.io&#x2F;blog" class="u-url " title="undecV">undecV</a>
</span>
<li><time class="dt-published" datetime="2024-03-29"><span class='separator' aria-hidden='true'>•</span>2024-03-29</time></li><li title="1933 words"><span class='separator' aria-hidden='true'>•</span>10 min read</li><li class="tag"><span class='separator' aria-hidden='true'>•</span>Tags:&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/zh-tw/">zh_TW</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/raspberry-pi/">Raspberry Pi</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/iot/">IoT</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/bme680/">BME680</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/sensor/">Sensor</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/tsdb/">TSDB</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/influxdb/">InfluxDB</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/dashboard/">Dashboard</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/grafana/">Grafana</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/prometheus/">Prometheus</a></li></ul><ul class="meta last-updated"><li><time class="dt-updated" datetime="2024-03-29">Updated on 2024-03-29</time></li>
        </ul>
            <p class="p-summary" hidden>&lt;del&gt;因為想讓樹莓派做一些像是樹莓派會做的事（？&lt;&#x2F;del&gt;</p><section class="e-content body"><!-- # 桌面級氣象站：樹梅派 × BME680 -->
<p>因為想讓樹莓派做一些像是樹莓派會做的事（？，
所以買了一顆 BME680 感測器來玩玩。</p>
<h2 id="ying-ti-xuan-ze">硬體選擇</h2>
<h3 id="wen-shi-du-gan-ce-qi">溫濕度感測器</h3>
<p>溫濕度感測器的選擇有很多，常見的有 DHT11、DHT22，以及 BMP180、BME280 等，
其中的功能、感測項目、範圍和精度都不相同，電路接法也各不相同，看下面的參考。</p>
<p>DHT11、DHT22、BMP180 僅支援溫度（Temperature）和溼度（Humidity），BME280 另外支援了氣壓（Pressure），BME680 除了上述的功能，還外加了感測揮發性有機化合物（VOC）。
更多的功能、更高的精度也就意味著更高的價格。
<del>但畢竟是難得買個玩具，當然是選可玩性高的。</del></p>
<p>至於電路，好在為了便於開發，電子材料行上賣的通常都有打包好了的模組，用杜邦線插到 樹莓派＼Arduino 上的 GPIO 就可以直接使用。</p>
<p>BME680 是 BOSCH 出品的感測器，對就是那個做家電品牌。
老師說過做硬體第一步就是去查 Datasheet。
至於打包好的模組，模組製造商也會提供相應的 Datasheet，包含了電路的接法和一些開發資料。
電路理所當然會改變感測器的輸入輸出，所以以模組的文檔為準。</p>
<p>參考：</p>
<ul>
<li>Random nerd tutorials: <a class="external" href="https://randomnerdtutorials.com/dht11-vs-dht22-vs-lm35-vs-ds18b20-vs-bme280-vs-bmp180/">DHT11 vs DHT22 vs LM35 vs DS18B20 vs BME280 vs BMP180</a></li>
<li>Bosch Sensortec: <a class="external" href="https://www.bosch-sensortec.com/products/environmental-sensors/gas-sensors/bme680/">Gas Sensor BME680</a></li>
<li>Waveshare Wiki: <a class="external" href="https://www.waveshare.net/wiki/BME680_Environmental_Sensor">BME680 Environmental Sensor</a></li>
</ul>
<h3 id="shu-mei-pai-4b">樹梅派4B</h3>
<p><del>樹梅派沒什麼好介紹的。</del>樹梅派上有一條又粗又長的 GPIO 接口，只在大學的時候做過相關的專案<del>（作業）</del>，有了自己的樹梅派之後也是把它拿來當成 Headless 的 Linux 電腦來使用，總想能有一天能自己玩玩 IoT。</p>
<p>要注意的是，在這個專案中使用到了 Docker，而一些 Docker container 會需要使用 64-bit 的作業系統，包括 64-bit Kernel 和 64-bit Userspace。我第一次知道 Kernel 和 Userspace 的架構可以不同...
然而，不知道為何我的 Raspberry Pi OS 是 64-bit Kernel + 32-bit Userspace，然後就不得不重灌了...</p>
<p>作業系統的架構可以通過以下指令檢查：</p>
<ul>
<li>The kernel architecture: <code>uname -m</code>.</li>
<li>The userspace architecture: <code>getconf LONG_BIT</code>.</li>
<li>APT/DPKG architecture: <code>dpkg --print-architecture</code></li>
</ul>
<p>參考：</p>
<ul>
<li>LinuxServer.io: <a class="external" href="https://www.linuxserver.io/blog/a-farewell-to-arm-hf">A Farewell To Arm(hf)</a></li>
</ul>
<h2 id="zhuan-an-zong-lan">專案總覽</h2>
<ul>
<li>感測器：BME680</li>
<li>開發平台：Raspberry Pi</li>
<li>開發環境：Python</li>
<li>資料庫：InfluxDB</li>
<li>儀錶板：Grafana</li>
</ul>
<p>這個專案只是最基本的把東西串接起來，比什麼什麼課程的期末專題廢得多。</p>
<h2 id="ying-ti-zu-zhuang-shi-ti-ceng">硬體組裝（實體層）</h2>
<p>首先是選擇通訊協定，我使用的 BME680 模組支援 I2C 和 SPI 實體層通訊協定，使用不同的協定電路接法不同，如何選擇實體層通訊協定可以看下面的參考。
這裡選擇 I2C，絕對不是因為我們使用的範例程式僅支援 I2C。</p>
<p>接線之前記得關機斷電，關機之前記得先打開 I2C 和 SPI 的支援，使用指令：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> raspi-config</span>
</span></code></pre>
<p>在 <code>Interfacing Options</code> 中啟用 <code>I2C</code> 或 <code>SPI</code>。檢查對應的 kernel modules 是否被成功載入：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">lsmod</span></span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">grep</span></span><span class="z-meta z-function-call z-arguments z-shell"> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>i2c\|spi<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span></span>
</span></code></pre>
<p>之後接線之前記得關機斷電，這很重要所以說兩遍。</p>
<p>把感測器和樹梅派接起來沒有什麼難度，就和 Pen pineapple apple pen 一樣，只要照著感測器的 Datasheet 插到樹梅派的 GPIO 上即可。</p>
<p>要注意的是，樹莓派 4B 官方外殼沒給 GPIO 留洞，畢竟我買的時候也沒考慮真的要玩 GPIO，接好感測器後上蓋基本上是沒法蓋回去的，走線還會卡到官方散熱模組。</p>
<p>參考：</p>
<ul>
<li><a class="external" href="https://www.eagletek.com.tw/post/i2c-spi-protocols">嵌入式系統中 I2C 和 SPI 通訊協定比較</a></li>
</ul>
<h2 id="an-zhuang-bme680-qu-dong-cheng-shi">安裝 BME680 驅動程式</h2>
<p>專案的平臺使用 樹莓派上標準的 Python，使用 Package pimoroni/bme680-python。</p>
<p>由於有些作業系統的程式是依賴 Python 的，所以在 Linux 上安裝 Python 的 Packages 時，不能直接使用 <code>pip</code> 安裝，通常會建議在專案資料夾下使用虛擬環境 <code>virtualenv</code>。方法略。</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">pip</span></span><span class="z-meta z-function-call z-arguments z-shell"> install bme680</span>
</span></code></pre>
<p>驅動程式碼中提供了範例使用程式，其中的 <code>read-all.py</code> 用於讀取所有參數，我們直接拿來用。</p>
<p>參考：</p>
<ul>
<li>GitHub: <a class="external" href="https://github.com/pimoroni/bme680-python">pimoroni/bme680-python</a></li>
</ul>
<h2 id="jian-li-shi-xu-zi-liao-ku-influxdb">建立時序資料庫：InfluxDB</h2>
<p>InfluxDB 是一個時序資料庫（TSDB），顧名思義就是把資料按時間存儲。</p>
<p>我們使用開源版本的 InfluxDB OSS v2。
InfluxDB 的選擇將會在附錄章節 InfluxDB v. Prometheus 討論。</p>
<p>InfluxDB OSS v2 可以通過 Docker 安裝。（註：範例中的地址 <code>127.0.0.1:8086</code> 為了安全僅限本機，若要開放，可以使用任意 Web 伺服器做反向代理，同時可以考慮啟用 HTTPS。）</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">influxdb</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">container_name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">influxdb</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">influxdb:2</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">restart</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">unless-stopped</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ports</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">127.0.0.1:8086:8086</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">volumes</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">        <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>./data:/var/lib/influxdb2<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml">        <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>./config:/etc/influxdb2<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span></code></pre>
<p>安裝完成後，使用瀏覽器訪問 Container 開放的 IP:Port 會看到 WebUI，做一些基本設定，例如建立賬號、建立 <code>bucket</code>、建立 <code>token</code>。
取得 <code>token</code>、<code>org</code> 和 <code>bucket</code> 之後，拿個小本本記下來。</p>
<p>在 Python 中，可以直接使用官方的 Package 訪問資料庫。</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">pip</span></span><span class="z-meta z-function-call z-arguments z-shell"> install influxdb-client</span>
</span></code></pre>
<p>參考：</p>
<ul>
<li>InfluxDB OSS v2 Documentation: <a class="external" href="https://docs.influxdata.com/influxdb/v2/install/">Install InfluxDB</a></li>
<li>InfluxDB Cloud (TSM) Documentation: <a class="external" href="https://docs.influxdata.com/influxdb/cloud/api-guide/client-libraries/python/">Use the InfluxDB Python client library</a></li>
</ul>
<h2 id="xie-yi-dian-cheng-shi">寫一點程式</h2>
<p>程式有兩個任務，按指定頻率的抓取感測值，然後放進資料庫。</p>
<p>我們可以直接修改上面提及的範例程式 <code>read-all.py</code>，畢竟是造好的輪子。
範例程式將抓取所有感測值，並將感測值印在標準輸出上。</p>
<h3 id="xie-qu-gan-ce-zhi">擷取感測值</h3>
<p>上文提到，BME680 還外加了感測揮發性有機化合物（VOC），VOC 感測器需要預熱。</p>
<p>在範例程式中，下面的代碼啟用 VOC 感測，刪掉即關閉：</p>
<pre data-lang="python" class="language-python z-code"><code class="language-python" data-lang="python"><span class="z-source z-python"><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sensor</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">set_gas_status</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">bme680</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-variable z-other z-constant z-python">ENABLE_GAS_MEAS</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span></code></pre>
<p>若啟用了 VOC 感測，當感測器準備好的時候 <code>sensor.data.heat_stable == True</code> 即可得到 VOC 值 <code>sensor.data.gas_resistance</code>。</p>
<p>範例程式：</p>
<pre data-lang="Python" class="language-Python z-code"><code class="language-Python" data-lang="Python"><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> BME680 初始化
</span></span><span class="z-source z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sensor</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">bme680</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">BME680</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">bme680</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-variable z-other z-constant z-python">I2C_ADDR_PRIMARY</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python">
</span><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> 讀取 BME680 資料
</span></span><span class="z-source z-python"><span class="z-meta z-statement z-conditional z-if z-python"><span class="z-keyword z-control z-conditional z-if z-python">if</span> <span class="z-keyword z-operator z-logical z-python">not</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sensor</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">get_sensor_data</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span><span class="z-punctuation z-section z-block z-conditional z-if z-python">:</span></span>
</span><span class="z-source z-python">    <span class="z-keyword z-control z-flow z-continue z-python">continue</span>
</span><span class="z-source z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">temperature</span></span><span class="z-punctuation z-separator z-annotation z-variable z-python">:</span> <span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">float</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sensor</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-meta z-generic-name z-python">data</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-meta z-generic-name z-python">temperature</span></span>
</span><span class="z-source z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pressure</span></span><span class="z-punctuation z-separator z-annotation z-variable z-python">:</span> <span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">float</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sensor</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-meta z-generic-name z-python">data</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-meta z-generic-name z-python">pressure</span></span>
</span><span class="z-source z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">humidity</span></span><span class="z-punctuation z-separator z-annotation z-variable z-python">:</span> <span class="z-meta z-qualified-name z-python"><span class="z-support z-type z-python">float</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">sensor</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-meta z-generic-name z-python">data</span><span class="z-punctuation z-accessor z-dot z-python">.</span><span class="z-meta z-generic-name z-python">humidity</span></span>
</span><span class="z-source z-python"><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-support z-function z-builtin z-python">print</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-storage z-type z-string z-python">f</span><span class="z-meta z-string z-interpolated z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-interpolated z-python"><span class="z-meta z-interpolation z-python"><span class="z-punctuation z-section z-interpolation z-begin z-python">{</span><span class="z-source z-python z-embedded"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">temperature</span></span></span><span class="z-meta z-format-spec z-python"><span class="z-constant z-other z-format-spec z-python">:.2f</span></span></span><span class="z-meta z-interpolation z-python"><span class="z-punctuation z-section z-interpolation z-end z-python">}</span></span><span class="z-string z-quoted z-double z-python"> °C, </span><span class="z-meta z-interpolation z-python"><span class="z-punctuation z-section z-interpolation z-begin z-python">{</span><span class="z-source z-python z-embedded"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pressure</span></span></span><span class="z-meta z-format-spec z-python"><span class="z-constant z-other z-format-spec z-python">:.2f</span></span></span><span class="z-meta z-interpolation z-python"><span class="z-punctuation z-section z-interpolation z-end z-python">}</span></span><span class="z-string z-quoted z-double z-python"> hPa, </span><span class="z-meta z-interpolation z-python"><span class="z-punctuation z-section z-interpolation z-begin z-python">{</span><span class="z-source z-python z-embedded"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">humidity</span></span></span><span class="z-meta z-format-spec z-python"><span class="z-constant z-other z-format-spec z-python">:.2f</span></span></span><span class="z-meta z-interpolation z-python"><span class="z-punctuation z-section z-interpolation z-end z-python">}</span></span><span class="z-string z-quoted z-double z-python"> %RH<span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span></code></pre>
<h3 id="xie-ru-zi-liao-ku">寫入資料庫</h3>
<p>範例程式：</p>
<pre data-lang="Python" class="language-Python z-code"><code class="language-Python" data-lang="Python"><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> InfluxDB 客戶端初始化
</span></span><span class="z-source z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">client</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">InfluxDBClient</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-variable z-parameter z-python">url</span><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">url</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-variable z-parameter z-python">token</span><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">token</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-variable z-parameter z-python">org</span><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">org</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python">
</span><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> InfluxDB 寫入 API 初始化
</span></span><span class="z-source z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">write_api</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">client</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">write_api</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-variable z-parameter z-python">write_options</span><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-other z-constant z-python">SYNCHRONOUS</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python">
</span><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> 構建 InfluxDB 數據點
</span></span><span class="z-source z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">data_point</span></span> <span class="z-keyword z-operator z-assignment z-python">=</span> <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">Point</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">bme680<span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-punctuation z-separator z-continuation z-line z-python">\</span>
</span><span class="z-source z-python">    <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">field</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">temperature<span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">temperature</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-punctuation z-separator z-continuation z-line z-python">\</span>
</span><span class="z-source z-python">    <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">field</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">pressure<span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">pressure</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span> <span class="z-punctuation z-separator z-continuation z-line z-python">\</span>
</span><span class="z-source z-python">    <span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">field</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python"><span class="z-punctuation z-definition z-string z-begin z-python">&quot;</span></span></span><span class="z-meta z-string z-python"><span class="z-string z-quoted z-double z-python">humidity<span class="z-punctuation z-definition z-string z-end z-python">&quot;</span></span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">humidity</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span><span class="z-source z-python">
</span><span class="z-source z-python"><span class="z-comment z-line z-number-sign z-python"><span class="z-punctuation z-definition z-comment z-python">#</span> 寫入 InfluxDB
</span></span><span class="z-source z-python"><span class="z-meta z-function-call z-python"><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">write_api</span></span><span class="z-meta z-qualified-name z-python"><span class="z-punctuation z-accessor z-dot z-python">.</span></span><span class="z-meta z-qualified-name z-python"><span class="z-variable z-function z-python"><span class="z-meta z-generic-name z-python">write</span></span></span></span><span class="z-meta z-function-call z-arguments z-python"><span class="z-punctuation z-section z-arguments z-begin z-python">(</span><span class="z-variable z-parameter z-python">bucket</span><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">bucket</span></span><span class="z-punctuation z-separator z-arguments z-python">,</span> <span class="z-variable z-parameter z-python">record</span><span class="z-keyword z-operator z-assignment z-python">=</span><span class="z-meta z-qualified-name z-python"><span class="z-meta z-generic-name z-python">data_point</span></span><span class="z-punctuation z-section z-arguments z-end z-python">)</span></span>
</span></code></pre>
<p>此時已成功的把資料寫進 InfluxDB 中，在 WebUI 界面中可以看到資料的更新。
InfluxDB 內建資料視覺化，已經夠用了。
<del>但只用它不夠潮，</del>要潮到出水，我們會用到 Grafana。</p>
<h2 id="jian-li-yi-biao-ban-grafana">建立儀錶板：Grafana</h2>
<p>Grafana 是一個儀錶板，用於資料視覺的呈現。Gragana 一樣可以通過 Docker 安裝。（註：同樣的，範例中的地址 <code>127.0.0.1:3000</code> 為了安全僅限本機，若要開放，可以使用任意 Web 伺服器做反向代理，同時修改 docker compose 的環境變數 <code>GF_SERVER_ROOT_URL</code>，同時可以考慮啟用 HTTPS。）</p>
<pre data-lang="yaml" class="language-yaml z-code"><code class="language-yaml" data-lang="yaml"><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">version</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-quoted z-double z-yaml"><span class="z-punctuation z-definition z-string z-begin z-yaml">&quot;</span>3.8<span class="z-punctuation z-definition z-string z-end z-yaml">&quot;</span></span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">services</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">grafana</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">image</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">grafana/grafana-oss</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">container_name</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">grafana</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">restart</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">unless-stopped</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">ports</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">127.0.0.1:3000:3000</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">environment</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">GF_SERVER_ROOT_URL=http://127.0.0.1:3000/</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">GF_DASHBOARDS_MIN_REFRESH_INTERVAL=1s</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">network_mode</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-string z-unquoted z-plain z-out z-yaml">host</span>
</span><span class="z-source z-yaml">    <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">volumes</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">      <span class="z-punctuation z-definition z-block z-sequence z-item z-yaml">-</span> <span class="z-string z-unquoted z-plain z-out z-yaml">grafana-storage:/var/lib/grafana</span>
</span><span class="z-source z-yaml"><span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">volumes</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span>
</span><span class="z-source z-yaml">  <span class="z-string z-unquoted z-plain z-out z-yaml"><span class="z-entity z-name z-tag z-yaml">grafana-storage</span></span><span class="z-punctuation z-separator z-key-value z-mapping z-yaml">:</span> <span class="z-meta z-flow-mapping z-yaml"><span class="z-punctuation z-definition z-mapping z-begin z-yaml">{</span><span class="z-punctuation z-definition z-mapping z-end z-yaml">}</span></span>
</span></code></pre>
<p>Grafana 中內建 InfluxDB 的支援，在資料來源中可直接選擇 InfluxDB，按說明設定即可。</p>
<p>Grafana 預設的更新間隔較長，修改 docker compose 中的環境變數 <code>GF_DASHBOARDS_MIN_REFRESH_INTERVAL</code> 調整最小間隔（範例中為 1 秒）。</p>
<p>至此，可以在 Grafana 的儀表板中「實時」看到 BME680 感測器的結果。</p>
<p>參考：</p>
<ul>
<li>SDpower @ iT 邦幫忙: 制霸IoT 30Day！系列 第 16 篇 <a class="external" href="https://ithelp.ithome.com.tw/articles/10223604">圖表（二）</a></li>
</ul>
<h2 id="appendix">Appendix</h2>
<h3 id="influxdb-v-prometheus">InfluxDB v. Prometheus</h3>
<p>InfluxDB 是時序資料庫，時序資料 簡單來說就是 時間 對應 資料；
而 Prometheus 更專注於監視和告警。
簡單來說，他們關鍵的差異在於 Push（推）和 Pull（拉）模型。</p>
<ul>
<li>InfluxDB 使用 Push model，程式 將 資料 <strong>推</strong> 到資料庫中。</li>
<li>Prometheus 使用 Pull model，資料 由 Prometheus <strong>拉</strong> 到資料庫中。</li>
</ul>
<p>因為是由 Prometheus 主動向程式（Exporter） 抓取資料，Exporter 將資料準備成特定的格式 metric；
若 Exporter 要直接對接 Prometheus，Exporter 必須實作一個 Web Server：
即是 Prometheus 向 Exporter 發送 HTTP 請求，Exporter 使用 HTTP 回應。</p>
<p>所以，資料的流程是：</p>
<ul>
<li>若使用 InfluxDB：資料源 -&gt; 程式 -&gt; InfluxDB &lt;- Grafana；</li>
<li>若使用 Prometheus：資料源 -&gt; Exporter &lt;- Prometheus &lt;- Grafana。</li>
</ul>

        </section>
                
                
                    
                        
                        
                        
                    
                    
                        
                        
                        
                    
                
                
            <nav class=" article-navigation">
                <div><a href="https://undecv.github.io/blog/posts/command_line_useages/nested-shell-scripting/" aria-label="Next" aria-describedby="left_title"><span class="arrow">←</span>&nbsp;Next</a>
                <p aria-hidden="true" id="left_title">打通 Windows 和 Linux 的傳送魔法陣！在 Shell 之間反覆橫跳</p></div>
                <div><a href="https://undecv.github.io/blog/posts/clicker-remote-control/" aria-label="Prev" aria-describedby="right_title">Prev&nbsp;<span class="arrow">→</span></a>
                <p aria-hidden="true" id="right_title">簡報筆變成電腦遙控器？！Surface Pen 也可以支援 Google Slides！</p></div>
            </nav>
        
        

        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
        </article>
</main>

    <div id="button-container">
        
        
            <div id="toc-floating-container">
                <input type="checkbox" id="toc-toggle" class="toggle"/>
                <label for="toc-toggle" class="overlay"></label>
                <label for="toc-toggle" id="toc-button" class="button" title="Toggle Table of Contents">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg>
                </label>
                <div class="toc-content">
                    

<div class="toc-container">
    

    <ul>
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#ying-ti-xuan-ze">硬體選擇</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#wen-shi-du-gan-ce-qi">溫濕度感測器</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#shu-mei-pai-4b">樹梅派4B</a>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#zhuan-an-zong-lan">專案總覽</a>
                    
                </li>
            
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#ying-ti-zu-zhuang-shi-ti-ceng">硬體組裝（實體層）</a>
                    
                </li>
            
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#an-zhuang-bme680-qu-dong-cheng-shi">安裝 BME680 驅動程式</a>
                    
                </li>
            
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#jian-li-shi-xu-zi-liao-ku-influxdb">建立時序資料庫：InfluxDB</a>
                    
                </li>
            
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#xie-yi-dian-cheng-shi">寫一點程式</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#xie-qu-gan-ce-zhi">擷取感測值</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#xie-ru-zi-liao-ku">寫入資料庫</a>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#jian-li-yi-biao-ban-grafana">建立儀錶板：Grafana</a>
                    
                </li>
            
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#appendix">Appendix</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://undecv.github.io/blog/posts/rpi4b-bme680/#influxdb-v-prometheus">InfluxDB v. Prometheus</a>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
    </ul>
</div>


                </div>
            </div>
        

        
        

        
        <a href="#" id="top-button" class="no-hover-padding" title="Go to the top of the page">
            <svg viewBox="0 0 20 20" fill="currentColor"><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg>
        </a>
    </div>


<link rel="stylesheet" href="https://undecv.github.io/blog/katex.min.css">
    <script defer src="https://undecv.github.io/blog/js/katex.min.js"></script><script defer src="https://undecv.github.io/blog/js/mermaid.min.js"></script><span id="copy-success" class="hidden">
        Copied!
    </span>
    <span id="copy-init" class="hidden">
        Copy code to clipboard
    </span>
    <script defer src="https://undecv.github.io/blog/js/copyCodeToClipboard.min.js"></script>

<script defer src="https://undecv.github.io/blog/js/codeBlockNameLinks.min.js"></script><script defer src="https://undecv.github.io/blog/js/footnoteBacklinks.min.js"></script>
    </div>
    <footer>
    <section>
        <nav class="socials nav-navs"><ul><li>
                        <a class="nav-links no-hover-padding social" rel="" 

 href="https://undecv.github.io/blog/atom.xml">
                        <img loading="lazy" alt="feed" title="feed" src="https://undecv.github.io/blog/social_icons/rss.svg">
                        </a>
                    </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me" 

 href="https://bsky.app/profile/poi48.xyz">
                                    <img loading="lazy" alt="Bluesky" title="Bluesky" src="https://undecv.github.io/blog/social_icons/bluesky.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me" 

 href="https://github.com/undecV/">
                                    <img loading="lazy" alt="GitHub" title="GitHub" src="https://undecv.github.io/blog/social_icons/github.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me" 

 href="https://g0v.social/@undecv">
                                    <img loading="lazy" alt="Mastodon" title="Mastodon" src="https://undecv.github.io/blog/social_icons/mastodon.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me" 

 href="https://orcid.org/0009-0001-8137-5570">
                                    <img loading="lazy" alt="ORCID" title="ORCID" src="https://undecv.github.io/blog/social_icons/orcid.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me" 

 href="https://t.me/s/poi0048">
                                    <img loading="lazy" alt="Telegram" title="Telegram" src="https://undecv.github.io/blog/social_icons/telegram.svg">
                                </a>
                            </li>
                        
                    
                </ul>
            
        </nav>

        
        <nav class="nav-navs">
                <small>
                    <ul>
                        
                        <li><a class="nav-links no-hover-padding" href="https:&#x2F;&#x2F;github.com&#x2F;undecV&#x2F;blog&#x2F;discussions&#x2F;">
                                Discussions
                            </a>
                        </li>
                    
                        <li><a class="nav-links no-hover-padding" href="https:&#x2F;&#x2F;undecv.github.io&#x2F;blog&#x2F;privacy">
                                Privacy
                            </a>
                        </li>
                    
                        <li><a class="nav-links no-hover-padding" href="https:&#x2F;&#x2F;undecv.github.io&#x2F;blog&#x2F;sitemap.xml">
                                Sitemap
                            </a>
                        </li>
                    
                    </ul>
                </small>
        
        </nav>

        <div class="credits">
            <small>
                
    
    
    
    
        
    
        
    

    

    
    
    

    
    
    <p><p>© 1996-2025 undecV • Unless otherwise noted, the content in this website is all rights reserved.</p>
</p>

                
                Powered by
                <a rel="" 

 href="https://www.getzola.org">Zola</a>
                &amp;
                <a rel="" 

 href="https://github.com/welpo/tabi">tabi</a>

                </small>
        </div>
    </section>

    </footer>


    
    
</body>

</html>
