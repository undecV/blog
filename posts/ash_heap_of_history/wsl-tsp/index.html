<!DOCTYPE html>
<html lang="en" >

<head>
    <meta charset="UTF-8"><meta http-equiv="Content-Security-Policy"
content="default-src 'self';font-src 'self' data: 'self';img-src 'self' https://* data:;media-src 'self';style-src 'self' 'unsafe-inline';frame-src player.vimeo.com https://www.youtube-nocookie.com;connect-src 'self' https://umami.d.poi48.xyz;script-src 'self' https://umami.d.poi48.xyz 'self'">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="base" content="https://undecv.github.io/blog">

    
    <title>
キャンディージャー • ［封存］把檔案壓縮影片轉檔任務放進佇列！用 WSL Task Spooler 排隊 Windows 的指令</title>

    
    
        <link rel="icon" type="image/png" href="https://undecv.github.io/blog/favicon.32.png"/>
    
    

    
    
        
            
            
                
                    <link rel="alternate" type="application/atom+xml" title="キャンディージャー - Atom Feed" href="https://undecv.github.io/blog/atom.xml">
                
            
                
                    <link rel="alternate" type="application/rss+xml" title="キャンディージャー - RSS Feed" href="https://undecv.github.io/blog/rss.xml">
                
            
        
    

    
    
    
        
            <link rel="stylesheet" href="https://undecv.github.io/blog/custom_subset.css?h=0b9535a28bc3d5bf2321">
        
    

    
        <link rel="stylesheet" href="https://undecv.github.io/blog/main.css?h=3716ab3457d2dd050b3c" />
        <link rel="stylesheet" href="https://undecv.github.io/blog/css/custom.css?h=1e2fa6957df82e1f9bb9" />
        <link rel="stylesheet" href="https://undecv.github.io/blog/skins/lowcontrast_orange.css?h=43aaccb17d8ec616ace4" />

    <meta name="color-scheme" content="light dark" />
        <meta name="description" content="[Archived] WSL Task Spooler Work With Batch Script" />
        <meta property="og:description" content="[Archived] WSL Task Spooler Work With Batch Script" />

    

    <meta property="og:title" content="［封存］把檔案壓縮影片轉檔任務放進佇列！用 WSL Task Spooler 排隊 Windows 的指令" />
    <meta property="og:type" content="article" />

    
<meta property="og:locale" content="en_GB" />

    <meta property="og:url" content="https:&#x2F;&#x2F;undecv.github.io&#x2F;blog&#x2F;posts&#x2F;ash_heap_of_history&#x2F;wsl-tsp&#x2F;" /><meta property="og:site_name" content="キャンディージャー">
        <noscript><link rel="stylesheet" href="https://undecv.github.io/blog/no_js.css"/></noscript>
        <script type="text/javascript" src="https://undecv.github.io/blog/js/initializeTheme.min.js"></script>
        <script defer src="https://undecv.github.io/blog/js/themeSwitcher.min.js"></script>




    <script async defer
    
        data-website-id="3252b6d8-dd6f-4baa-a6f2-d6078a5858c2"
        src="https://umami.d.poi48.xyz/script.js"
    
    >
    </script>

    
<meta name="fediverse:creator" content="@undecv@g0v.social" />
    
</head>


<body>
    <a href="#main-content" id="skip-link">Skip to content</a>
    <header>
    <nav class="navbar">
        <div class="nav-title">
            <a class="home-title" href="https://undecv.github.io/blog/">キャンディージャー</a>
        </div>
            <div class="nav-navs">
                <ul>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://undecv.github.io/blog/posts/">Posts
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://undecv.github.io/blog/archive/">Archive
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://undecv.github.io/blog/tags/">Tags
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://undecv.github.io/blog/projects/">Projects
                                </a>
                            </li>
                        <li class="menu-icons-container">
                        <ul class="menu-icons-group">
                            

                            
                            

                            <li class="theme-switcher-wrapper js"><div
        title="Toggle dark&#x2F;light mode"
        class="theme-switcher"
        tabindex="0"
        role="button"
        aria-label="Toggle dark mode"
        aria-pressed="false">
    </div><div
        title="Reset mode to default"
        class="theme-resetter arrow"
        tabindex="0"
        role="button"
        aria-hidden="true"
        aria-label="Reset mode to default">
    </div>

</li>
</ul>
                    </li>
                </ul>
            </div>
        
    </nav>
</header>

    <div class="content" id="main-content">

        
        





<main>
    <article class="h-entry">
        <h1 class="p-name article-title">
            ［封存］把檔案壓縮影片轉檔任務放進佇列！用 WSL Task Spooler 排隊 Windows 的指令
        </h1>
        <a class="u-url u-uid" href="https://undecv.github.io/blog/posts/ash_heap_of_history/wsl-tsp/"></a>

        <ul class="meta"><li>By <span class="p-author">undecV</span></li><span class="hidden p-author h-card">
<a rel="author" href="https:&#x2F;&#x2F;undecv.github.io&#x2F;blog" class="u-url " title="undecV">undecV</a>
</span>
<li><time class="dt-published" datetime="2021-04-12T01:00:00"><span class='separator' aria-hidden='true'>•</span>2021-04-12</time></li><li title="1544 words"><span class='separator' aria-hidden='true'>•</span>8 min read</li><li class="tag"><span class='separator' aria-hidden='true'>•</span>Tags:&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/zh-tw/">zh_TW</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/command-line/">Command Line</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/cli/">CLI</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/wsl/">WSL</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/windows/">Windows</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/linux/">Linux</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/task-queuing/">Task Queuing</a>,&nbsp;</li><li class="tag"><a class="p-category" href="https://undecv.github.io/blog/tags/file-archive/">File Archive</a></li></ul><ul class="meta last-updated"><li><time class="dt-updated" datetime="2021-04-12T01:00:00">Updated on 2021-04-12</time></li>
        </ul>
            <p class="p-summary" hidden>[Archived] WSL Task Spooler Work With Batch Script</p><section class="e-content body">
    <section class="series-page-intro">
                <p>這篇文章出土自 <a href="https://undecv.github.io/blog/posts/ash_heap_of_history/" aria_label="歷史的垃圾堆">歷史的垃圾堆</a> 系列，僅供考古，不供參考。</p>

            </section>
<blockquote>
<p>🛑（2025-05）現在我更推薦使用新的工具軟體 Pueue 達成同樣的任務，請見本站的介紹文：<a href="https://undecv.github.io/blog/posts/command_line_useages/pueue-introduction/">把指令放進佇列！用 Pueue 排隊指令</a>。</p>
</blockquote>
<p>有時候需要執行一些時間長、需要大量系統資源的指令，例如巨量資料的計算、機器學習，或是更常用的檔案壓縮、影片轉檔。希望這些高負載的指令可以被順序執行而不是同時執行，同時執行會佔用過多的系統資源，不僅互相拖慢速度，也影響到其他程式的流暢執行，大幅降低了摸魚體驗。</p>
<p>Linux 上有一個滿足這個需求的工具 <a class="external" href="https://vicerveza.homeunix.net/~viric/soft/ts/">Task Spooler</a> (tsp)，Windows 上我沒有找到理想的替代品，但是，Windows 有 WSL。</p>
<p>Task Spooler 可以：</p>
<ul>
<li>希望指令在一個先進先出佇列中排隊，同時有壹個或多個指令執行；</li>
<li>佇列可以按需調整，新增、刪除、調整順序，甚至中止當前正在執行的任務。</li>
</ul>
<p>這篇文章將 Linux 中的 Task Spooler 透過 WSL 中與 Windows 的批次檔聯動，並演示了排隊 7-Zip 的多個任務。後面的章節會簡要提及 WSL 1 啓動的步驟。</p>
<p>作業環境：</p>
<ul>
<li>Windows 10</li>
<li><a class="external" href="https://www.7-zip.org/">7-Zip</a></li>
<li>WSL 1</li>
</ul>
<h2 id="xin-zeng-huan-jing-bian-shu">新增環境變數</h2>
<p>在指令中，若是需要使用自己安裝的程式需要指定路徑，若想要直接呼叫程式就需要把程式的路徑新增到環境變數。</p>
<p>假設 7-Zip 安裝在 <code>C:\Program Files\7-Zip</code>，在 PowerShell 指令會需要呼叫 「<code>&amp; "C:\Program Files\7-Zip\7z.exe"</code>」，若將安裝的路徑新增到環境變數之後，只需要呼叫「<code>7z</code>」即可。</p>
<ol>
<li>搜尋 "Edit the system enviroment varibles"，點選 "Enviroment Varibles..."；</li>
<li>在 "System varibles" 中，找到並點選環境變數 <code>Path</code>，點選 "Edit..."；</li>
<li>點選 "New" 並填入軟體的安裝路徑，例如 <code>C:\Program Files\7-Zip\</code>，點選 "OK"。</li>
<li>生效會需要重新開機。（但是後面也會有需要重新開機的步驟所以可以先等等）</li>
</ol>
<h2 id="7-zip-zhi-ling-yu-pi-ci-dang">7-Zip 指令與批次檔</h2>
<p>Windows 版本的 7-Zip 原生支援指令行模式，<a class="external" href="https://sevenzip.osdn.jp/chm/cmdline/index.htm">User's Guide</a> 說明了詳細的用法。例如下面的指令將 <code>D:\src</code> 以 7z 的格式壓縮到 <code>D:\dst.7z</code>：</p>
<pre data-lang="cmd" class="language-cmd z-code"><code class="language-cmd" data-lang="cmd"><span class="z-source z-dosbatch">7z a -t7z <span class="z-string z-quoted z-double z-dosbatch"><span class="z-punctuation z-definition z-string z-begin z-dosbatch">&quot;</span>D:\dst.7z<span class="z-punctuation z-definition z-string z-end z-dosbatch">&quot;</span></span> <span class="z-string z-quoted z-double z-dosbatch"><span class="z-punctuation z-definition z-string z-begin z-dosbatch">&quot;</span>D:\src<span class="z-punctuation z-definition z-string z-end z-dosbatch">&quot;</span></span>
</span></code></pre>
<p>一個小小的訣竅可以節省壓縮檔案的步驟，創立一個 Batch 批次檔手稿程式，新增一個 txt 文字檔，並將副檔名改成 <code>.bat</code> 即可，例如 <code>zipit.bat</code>，編輯內容並存檔：</p>
<pre data-lang="batch" class="language-batch z-code"><code class="language-batch" data-lang="batch"><span class="z-text z-plain">7z a -tzip &quot;%~1.zip&quot; &quot;%~1&quot; -mx=9 -mcu=on
</span><span class="z-text z-plain">@PAUSE
</span></code></pre>
<p>在檔案總管中，拖動 <em><strong>一個</strong></em> 檔案或者資料夾到這個 BAT 檔案的圖示上，
便會在同個地方把這個檔案或者資料夾以 ZIP 格式壓縮，並且指定最高壓縮比（最小檔案大小、最長壓縮時間），並且最重要的指定以 Unicode 編碼檔名。這個手稿程式在後面的範例會再次用到。</p>
<h2 id="wsl-an-zhuang">WSL 安裝</h2>
<p>M$ 秉承著打不贏就加入他們的精神，
聯合一眾 Friends 做出了曠古未聞空前絕後驚世駭俗的 Windows Subsystem for Linux (WSL)，
WSL 可以讓 Windows 執行 Linux 的程式，並且可以串接 Windows 的指令。</p>
<ol>
<li>在開始功能表中搜尋 "Turn Windows features on or off"，開啟 "Windows Subsystem for Linux"，在安裝完成後會需要重新開機。</li>
<li>在 "Microsoft Store" 中，搜尋 "WSL" 即可找到諸如 Debian、Ubuntu、SUSE、Kali 各發行版，如果你是 Linux 新手，可以試試好上手的 <a class="external" href="https://www.microsoft.com/store/productId/9NBLGGH4MSV6">Ubuntu</a>，後面也會拿這個舉例。</li>
<li>開始選單會出現安裝後的 Ubuntu，初次使用會需要設定 UNIX 使用者名稱和密碼。這些都不會影響到原本的作業系統，忘記密碼也可以透過特殊手段重設。當你看到 <code>使用者名稱@電腦名:~$</code> 的時候，到此你的 WSL 的設定就完成了。</li>
</ol>
<p>進行 WSL 的更新，執行需要輸入剛剛設定的 UNIX 密碼：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> apt-get update</span> <span class="z-keyword z-operator z-logical z-and z-shell">&amp;&amp;</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> apt-get upgrade</span>
</span></code></pre>
<h2 id="task-spooler">Task Spooler</h2>
<blockquote>
<p>TL;DR：Task Spooler 的絕妙的設計，是 伺服器＼客戶端，使用者使用 tsp 指令創立任務時，會創立一個客戶端，到後臺等待伺服器的通知後執行，完成後回報給伺服器，伺服器再通知下一個客戶端的指令執行，伺服器負責發號施令而不會執行指令。</p>
</blockquote>
<p>在 WSL 中下載安裝 Task Spooler：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">sudo</span></span><span class="z-meta z-function-call z-arguments z-shell"> apt-get install task-spooler</span>
</span></code></pre>
<p>Task Spooler 的指令是 <code>tsp</code>，列出一些基本用法：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tsp</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>V          <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> 檢查版本</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tsp</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>h          <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> 印出說明</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tsp</span></span><span class="z-meta z-function-call z-arguments z-shell"> sleep 5     <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> 新增指令 `sleep 5` 到任務佇列，返回的數字是任務的 ID</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tsp             <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> 印出任務列表</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tsp</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>c</span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">id</span></span>      <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> 小寫 c，檢查指定任務的輸出，</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span><span class="z-source z-shell z-bash">                <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell">     替換 $id 為什麼任務 ID，不指定的話會印出最後一個</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tsp</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>S</span> <span class="z-meta z-group z-expansion z-parameter z-shell"><span class="z-punctuation z-definition z-variable z-shell">$</span><span class="z-variable z-other z-readwrite z-shell">num</span></span>     <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> 大寫 S，指定同時執行任務的數量，</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span><span class="z-source z-shell z-bash">                <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell">     替換 $num 為數量，不指定的話會印出當前的設定</span><span class="z-comment z-line z-number-sign z-shell">
</span></span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">tsp</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>C          <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> 大寫 C，清除已經完成的任務</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></span></code></pre>
<p>我們也可以專門開一個終端機，使用 <code>watch</code> 指令來實時監視 Task Spooler 的任務列表：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">watch</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>n</span> 0.1 tsp</span>
</span></code></pre>
<h2 id="wsl-chuan-jie-zhi-ling">WSL 串接指令</h2>
<p>Windows 的 Batch \ PowerShell 與 WSL 之間可以 <a class="external" href="https://docs.microsoft.com/zh-tw/windows/wsl/interop">互相串接指令</a> ，在 Batch \ PowerShell 中串接 WSL 的指令：</p>
<pre data-lang="PowerShell" class="language-PowerShell z-code"><code class="language-PowerShell" data-lang="PowerShell"><span class="z-source z-powershell">wsl ls <span class="z-keyword z-operator z-assignment z-powershell">-</span>la  <span class="z-comment z-line z-powershell"><span class="z-punctuation z-definition z-comment z-powershell">#</span> 執行 WSL 端的 ls 指令列出當前路徑下所有檔案和資料夾等內容<span class="z-punctuation z-definition z-comment z-powershell">
</span></span></span><span class="z-source z-powershell">wsl tsp     <span class="z-comment z-line z-powershell"><span class="z-punctuation z-definition z-comment z-powershell">#</span> 執行 WSL 端的 Task Spooler，印出任務列表<span class="z-punctuation z-definition z-comment z-powershell">
</span></span></span></code></pre>
<p>在 WSL 中也可以呼叫 Windows 端的工具軟體，參數會原樣傳遞：</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">7z.exe</span></span><span class="z-meta z-function-call z-arguments z-shell"> a<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>t7z</span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>D:\dst.7z<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span> <span class="z-string z-quoted z-double z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">&quot;</span>D:\src<span class="z-punctuation z-definition z-string z-end z-shell">&quot;</span></span>  <span class="z-comment z-line z-number-sign z-shell"><span class="z-punctuation z-definition z-comment z-begin z-shell">#</span></span><span class="z-comment z-line z-number-sign z-shell"> 執行 Windows 端的 7-Zip</span><span class="z-comment z-line z-number-sign z-shell">
</span></span></span></code></pre>
<p>注意，若 WSL 安裝過移植版的「p7zip」，指令 <code>7z</code> 會是指「p7zip」而不是 Windows 版的「7z.exe」。</p>
<h2 id="zai-pi-ci-dang-zhong-shi-yong-task-spooler">在批次檔中使用 Task Spooler</h2>
<p>創立一個 Batch 批次檔手稿程式，實現在檔案總管中點開就可以監視 Task Spooler 的任務列表。</p>
<pre data-lang="batch" class="language-batch z-code"><code class="language-batch" data-lang="batch"><span class="z-text z-plain">wsl watch -n 0.1 tsp
</span></code></pre>
<p>編輯或者複製之前範例的批次檔手稿程式 <code>zipit.bat</code>，與上面的例子作用是相同的，只是將指令託管到 Task Spooler 的佇列中：</p>
<pre data-lang="batch" class="language-batch z-code"><code class="language-batch" data-lang="batch"><span class="z-text z-plain">wsl tsp -f &quot;7z.exe&quot; a -tzip &quot;%~1.zip&quot; &quot;%~1&quot; -mx=9 -mcu=on
</span></code></pre>
<p>在檔案總管中，拖動 <em><strong>一個</strong></em> 檔案或者資料夾到這個 BAT 檔案的圖示上，
便會在同個地方把這個檔案或者資料夾以 ZIP 格式壓縮，並且指定最高壓縮比和指定以 Unicode 編碼檔名。</p>
<p>這個指令，會彈出一個終端機視窗，會返回一個數字這個任務的 ID，任務完成後視窗會自動關閉。</p>
<p>在監視 Task Spooler 的任務列表的終端機中，就會出現當前任務的狀態。</p>
<blockquote>
<p>TL;DR：參數 <code>-f</code> 會阻止客戶端把指令 Fork 到背景等待執行。在我的測試中，若不加這個參數會導致加入佇列後直接執行的任務卡住，導致任務無法完成，也就沒辦法繼續執行後面的任務。</p>
</blockquote>

    <section class="series-page-outro">
                <p>感謝你閱讀 <a href="https://undecv.github.io/blog/posts/ash_heap_of_history/" aria_label="歷史的垃圾堆">歷史的垃圾堆</a> 系列的這篇文物。再次提醒：<strong>DO NOT TRY IT AT HOME!</strong></p>

            </section>

        </section>
                
                
                    
                        
                        
                        
                    
                    
                        
                        
                        
                    
                
                
            <nav class=" article-navigation">
                <div><a href="https://undecv.github.io/blog/posts/vlc-fractional-scaling/" aria-label="Next" aria-describedby="left_title"><span class="arrow">←</span>&nbsp;Next</a>
                <p aria-hidden="true" id="left_title">Windows 下手動修正 VLC 界面縮放</p></div>
                <div><a href="https://undecv.github.io/blog/posts/rpi4b-nas-ep2/" aria-label="Prev" aria-describedby="right_title">Prev&nbsp;<span class="arrow">→</span></a>
                <p aria-hidden="true" id="right_title">Raspberry Pi 4B 搭建 NAS 第二話：網路篇</p></div>
            </nav>
        
        

        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
        </article>
</main>

    <div id="button-container">
        
        
            <div id="toc-floating-container">
                <input type="checkbox" id="toc-toggle" class="toggle"/>
                <label for="toc-toggle" class="overlay"></label>
                <label for="toc-toggle" id="toc-button" class="button" title="Toggle Table of Contents">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg>
                </label>
                <div class="toc-content">
                    

<div class="toc-container">
    

    <ul>
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/ash_heap_of_history/wsl-tsp/#xin-zeng-huan-jing-bian-shu">新增環境變數</a>
                    
                </li>
            
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/ash_heap_of_history/wsl-tsp/#7-zip-zhi-ling-yu-pi-ci-dang">7-Zip 指令與批次檔</a>
                    
                </li>
            
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/ash_heap_of_history/wsl-tsp/#wsl-an-zhuang">WSL 安裝</a>
                    
                </li>
            
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/ash_heap_of_history/wsl-tsp/#task-spooler">Task Spooler</a>
                    
                </li>
            
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/ash_heap_of_history/wsl-tsp/#wsl-chuan-jie-zhi-ling">WSL 串接指令</a>
                    
                </li>
            
        
            
            
                <li><a href="https://undecv.github.io/blog/posts/ash_heap_of_history/wsl-tsp/#zai-pi-ci-dang-zhong-shi-yong-task-spooler">在批次檔中使用 Task Spooler</a>
                    
                </li>
            
        
    </ul>
</div>


                </div>
            </div>
        

        
        

        
        <a href="#" id="top-button" class="no-hover-padding" title="Go to the top of the page">
            <svg viewBox="0 0 20 20" fill="currentColor"><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg>
        </a>
    </div>


<link rel="stylesheet" href="https://undecv.github.io/blog/katex.min.css">
    <script defer src="https://undecv.github.io/blog/js/katex.min.js"></script><script defer src="https://undecv.github.io/blog/js/mermaid.min.js"></script><span id="copy-success" class="hidden">
        Copied!
    </span>
    <span id="copy-init" class="hidden">
        Copy code to clipboard
    </span>
    <script defer src="https://undecv.github.io/blog/js/copyCodeToClipboard.min.js"></script>

<script defer src="https://undecv.github.io/blog/js/codeBlockNameLinks.min.js"></script><script defer src="https://undecv.github.io/blog/js/footnoteBacklinks.min.js"></script>
    </div>
    <footer>
    <section>
        <nav class="socials nav-navs"><ul><li>
                        <a class="nav-links no-hover-padding social" rel="" 

 href="https://undecv.github.io/blog/atom.xml">
                        <img loading="lazy" alt="feed" title="feed" src="https://undecv.github.io/blog/social_icons/rss.svg">
                        </a>
                    </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me" 

 href="https://bsky.app/profile/poi48.xyz">
                                    <img loading="lazy" alt="Bluesky" title="Bluesky" src="https://undecv.github.io/blog/social_icons/bluesky.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me" 

 href="https://github.com/undecV/">
                                    <img loading="lazy" alt="GitHub" title="GitHub" src="https://undecv.github.io/blog/social_icons/github.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me" 

 href="https://g0v.social/@undecv">
                                    <img loading="lazy" alt="Mastodon" title="Mastodon" src="https://undecv.github.io/blog/social_icons/mastodon.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me" 

 href="https://orcid.org/0009-0001-8137-5570">
                                    <img loading="lazy" alt="ORCID" title="ORCID" src="https://undecv.github.io/blog/social_icons/orcid.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me" 

 href="https://t.me/s/poi0048">
                                    <img loading="lazy" alt="Telegram" title="Telegram" src="https://undecv.github.io/blog/social_icons/telegram.svg">
                                </a>
                            </li>
                        
                    
                </ul>
            
        </nav>

        
        <nav class="nav-navs">
                <small>
                    <ul>
                        
                        <li><a class="nav-links no-hover-padding" href="https:&#x2F;&#x2F;github.com&#x2F;undecV&#x2F;blog&#x2F;discussions&#x2F;">
                                Discussions
                            </a>
                        </li>
                    
                        <li><a class="nav-links no-hover-padding" href="https:&#x2F;&#x2F;undecv.github.io&#x2F;blog&#x2F;privacy">
                                Privacy
                            </a>
                        </li>
                    
                        <li><a class="nav-links no-hover-padding" href="https:&#x2F;&#x2F;undecv.github.io&#x2F;blog&#x2F;sitemap.xml">
                                Sitemap
                            </a>
                        </li>
                    
                    </ul>
                </small>
        
        </nav>

        <div class="credits">
            <small>
                
    
    
    
    
        
    
        
    

    

    
    
    

    
    
    <p><p>© 1996-2025 undecV • Unless otherwise noted, the content in this website is all rights reserved.</p>
</p>

                
                Powered by
                <a rel="" 

 href="https://www.getzola.org">Zola</a>
                &amp;
                <a rel="" 

 href="https://github.com/welpo/tabi">tabi</a>

                </small>
        </div>
    </section>

    </footer>


    
    
</body>

</html>
